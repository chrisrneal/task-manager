-- Seed data for Basic Scrum template
-- This creates a complete Scrum template with states, workflows, task types, and fields

-- Create Basic Scrum template
INSERT INTO project_templates (id, name, description, icon)
VALUES (
  'aa000000-0000-0000-0000-000000000000',
  'Basic Scrum',
  'A standard Scrum template with story points, sprints, and typical workflow states',
  'üèÉ‚Äç‚ôÇÔ∏è'
);

-- Create template states for Basic Scrum
INSERT INTO template_states (id, template_id, name, position)
VALUES
  ('aa111111-1111-1111-1111-111111111111', 'aa000000-0000-0000-0000-000000000000', 'Product Backlog', 1),
  ('aa222222-2222-2222-2222-222222222222', 'aa000000-0000-0000-0000-000000000000', 'Sprint Backlog', 2),
  ('aa333333-3333-3333-3333-333333333333', 'aa000000-0000-0000-0000-000000000000', 'In Progress', 3),
  ('aa444444-4444-4444-4444-444444444444', 'aa000000-0000-0000-0000-000000000000', 'In Review', 4),
  ('aa555555-5555-5555-5555-555555555555', 'aa000000-0000-0000-0000-000000000000', 'Testing', 5),
  ('aa666666-6666-6666-6666-666666666666', 'aa000000-0000-0000-0000-000000000000', 'Done', 6);

-- Create template workflows
INSERT INTO template_workflows (id, template_id, name)
VALUES
  ('bb111111-1111-1111-1111-111111111111', 'aa000000-0000-0000-0000-000000000000', 'Standard Story Workflow'),
  ('bb222222-2222-2222-2222-222222222222', 'aa000000-0000-0000-0000-000000000000', 'Bug Fix Workflow'),
  ('bb333333-3333-3333-3333-333333333333', 'aa000000-0000-0000-0000-000000000000', 'Epic Workflow');

-- Create workflow steps for Standard Story Workflow
INSERT INTO template_workflow_steps (workflow_id, state_id, step_order)
VALUES
  ('bb111111-1111-1111-1111-111111111111', 'aa111111-1111-1111-1111-111111111111', 1), -- Product Backlog
  ('bb111111-1111-1111-1111-111111111111', 'aa222222-2222-2222-2222-222222222222', 2), -- Sprint Backlog
  ('bb111111-1111-1111-1111-111111111111', 'aa333333-3333-3333-3333-333333333333', 3), -- In Progress
  ('bb111111-1111-1111-1111-111111111111', 'aa444444-4444-4444-4444-444444444444', 4), -- In Review
  ('bb111111-1111-1111-1111-111111111111', 'aa555555-5555-5555-5555-555555555555', 5), -- Testing
  ('bb111111-1111-1111-1111-111111111111', 'aa666666-6666-6666-6666-666666666666', 6); -- Done

-- Create workflow steps for Bug Fix Workflow (skips sprint backlog)
INSERT INTO template_workflow_steps (workflow_id, state_id, step_order)
VALUES
  ('bb222222-2222-2222-2222-222222222222', 'aa111111-1111-1111-1111-111111111111', 1), -- Product Backlog
  ('bb222222-2222-2222-2222-222222222222', 'aa333333-3333-3333-3333-333333333333', 2), -- In Progress
  ('bb222222-2222-2222-2222-222222222222', 'aa444444-4444-4444-4444-444444444444', 3), -- In Review
  ('bb222222-2222-2222-2222-222222222222', 'aa555555-5555-5555-5555-555555555555', 4), -- Testing
  ('bb222222-2222-2222-2222-222222222222', 'aa666666-6666-6666-6666-666666666666', 5); -- Done

-- Create workflow steps for Epic Workflow (simplified)
INSERT INTO template_workflow_steps (workflow_id, state_id, step_order)
VALUES
  ('bb333333-3333-3333-3333-333333333333', 'aa111111-1111-1111-1111-111111111111', 1), -- Product Backlog
  ('bb333333-3333-3333-3333-333333333333', 'aa333333-3333-3333-3333-333333333333', 2), -- In Progress
  ('bb333333-3333-3333-3333-333333333333', 'aa666666-6666-6666-6666-666666666666', 3); -- Done

-- Create workflow transitions for Standard Story Workflow
INSERT INTO template_workflow_transitions (workflow_id, from_state, to_state)
VALUES
  -- Normal progression
  ('bb111111-1111-1111-1111-111111111111', 'aa111111-1111-1111-1111-111111111111', 'aa222222-2222-2222-2222-222222222222'), -- Product Backlog ‚Üí Sprint Backlog
  ('bb111111-1111-1111-1111-111111111111', 'aa222222-2222-2222-2222-222222222222', 'aa333333-3333-3333-3333-333333333333'), -- Sprint Backlog ‚Üí In Progress
  ('bb111111-1111-1111-1111-111111111111', 'aa333333-3333-3333-3333-333333333333', 'aa444444-4444-4444-4444-444444444444'), -- In Progress ‚Üí In Review
  ('bb111111-1111-1111-1111-111111111111', 'aa444444-4444-4444-4444-444444444444', 'aa555555-5555-5555-5555-555555555555'), -- In Review ‚Üí Testing
  ('bb111111-1111-1111-1111-111111111111', 'aa555555-5555-5555-5555-555555555555', 'aa666666-6666-6666-6666-666666666666'), -- Testing ‚Üí Done
  -- Backwards flow
  ('bb111111-1111-1111-1111-111111111111', 'aa444444-4444-4444-4444-444444444444', 'aa333333-3333-3333-3333-333333333333'), -- In Review ‚Üí In Progress (needs work)
  ('bb111111-1111-1111-1111-111111111111', 'aa555555-5555-5555-5555-555555555555', 'aa333333-3333-3333-3333-333333333333'), -- Testing ‚Üí In Progress (failed testing)
  ('bb111111-1111-1111-1111-111111111111', 'aa555555-5555-5555-5555-555555555555', 'aa444444-4444-4444-4444-444444444444'), -- Testing ‚Üí In Review (needs more review)
  -- Return to backlog
  ('bb111111-1111-1111-1111-111111111111', 'aa333333-3333-3333-3333-333333333333', 'aa222222-2222-2222-2222-222222222222'), -- In Progress ‚Üí Sprint Backlog (deprioritized)
  ('bb111111-1111-1111-1111-111111111111', 'aa222222-2222-2222-2222-222222222222', 'aa111111-1111-1111-1111-111111111111'); -- Sprint Backlog ‚Üí Product Backlog (moved out of sprint)

-- Create workflow transitions for Bug Fix Workflow
INSERT INTO template_workflow_transitions (workflow_id, from_state, to_state)
VALUES
  -- Normal progression
  ('bb222222-2222-2222-2222-222222222222', 'aa111111-1111-1111-1111-111111111111', 'aa333333-3333-3333-3333-333333333333'), -- Product Backlog ‚Üí In Progress
  ('bb222222-2222-2222-2222-222222222222', 'aa333333-3333-3333-3333-333333333333', 'aa444444-4444-4444-4444-444444444444'), -- In Progress ‚Üí In Review
  ('bb222222-2222-2222-2222-222222222222', 'aa444444-4444-4444-4444-444444444444', 'aa555555-5555-5555-5555-555555555555'), -- In Review ‚Üí Testing
  ('bb222222-2222-2222-2222-222222222222', 'aa555555-5555-5555-5555-555555555555', 'aa666666-6666-6666-6666-666666666666'), -- Testing ‚Üí Done
  -- Backwards flow
  ('bb222222-2222-2222-2222-222222222222', 'aa444444-4444-4444-4444-444444444444', 'aa333333-3333-3333-3333-333333333333'), -- In Review ‚Üí In Progress
  ('bb222222-2222-2222-2222-222222222222', 'aa555555-5555-5555-5555-555555555555', 'aa333333-3333-3333-3333-333333333333'), -- Testing ‚Üí In Progress
  ('bb222222-2222-2222-2222-222222222222', 'aa555555-5555-5555-5555-555555555555', 'aa444444-4444-4444-4444-444444444444'); -- Testing ‚Üí In Review

-- Create workflow transitions for Epic Workflow
INSERT INTO template_workflow_transitions (workflow_id, from_state, to_state)
VALUES
  ('bb333333-3333-3333-3333-333333333333', 'aa111111-1111-1111-1111-111111111111', 'aa333333-3333-3333-3333-333333333333'), -- Product Backlog ‚Üí In Progress
  ('bb333333-3333-3333-3333-333333333333', 'aa333333-3333-3333-3333-333333333333', 'aa666666-6666-6666-6666-666666666666'), -- In Progress ‚Üí Done
  ('bb333333-3333-3333-3333-333333333333', 'aa333333-3333-3333-3333-333333333333', 'aa111111-1111-1111-1111-111111111111'); -- In Progress ‚Üí Product Backlog (if needs to be paused)

-- Create task types
INSERT INTO template_task_types (id, template_id, name, workflow_id)
VALUES
  ('cc111111-1111-1111-1111-111111111111', 'aa000000-0000-0000-0000-000000000000', 'User Story', 'bb111111-1111-1111-1111-111111111111'),
  ('cc222222-2222-2222-2222-222222222222', 'aa000000-0000-0000-0000-000000000000', 'Bug', 'bb222222-2222-2222-2222-222222222222'),
  ('cc333333-3333-3333-3333-333333333333', 'aa000000-0000-0000-0000-000000000000', 'Epic', 'bb333333-3333-3333-3333-333333333333'),
  ('cc444444-4444-4444-4444-444444444444', 'aa000000-0000-0000-0000-000000000000', 'Task', 'bb111111-1111-1111-1111-111111111111'),
  ('cc555555-5555-5555-5555-555555555555', 'aa000000-0000-0000-0000-000000000000', 'Spike', 'bb111111-1111-1111-1111-111111111111');

-- Create template fields
INSERT INTO template_fields (id, template_id, name, input_type, is_required, options, default_value)
VALUES
  -- Story Points field
  ('dd111111-1111-1111-1111-111111111111', 'aa000000-0000-0000-0000-000000000000', 'Story Points', 'select', false, 
   ARRAY['1', '2', '3', '5', '8', '13', '21'], NULL),
  -- Priority field
  ('dd222222-2222-2222-2222-222222222222', 'aa000000-0000-0000-0000-000000000000', 'Priority', 'select', false,
   ARRAY['Critical', 'High', 'Medium', 'Low'], 'Medium'),
  -- Sprint field
  ('dd333333-3333-3333-3333-333333333333', 'aa000000-0000-0000-0000-000000000000', 'Sprint', 'text', false, NULL, NULL),
  -- Acceptance Criteria field
  ('dd444444-4444-4444-4444-444444444444', 'aa000000-0000-0000-0000-000000000000', 'Acceptance Criteria', 'textarea', false, NULL, NULL),
  -- Definition of Done field
  ('dd555555-5555-5555-5555-555555555555', 'aa000000-0000-0000-0000-000000000000', 'Definition of Done', 'checkbox', false, NULL, NULL),
  -- Epic Link field
  ('dd666666-6666-6666-6666-666666666666', 'aa000000-0000-0000-0000-000000000000', 'Epic Link', 'text', false, NULL, NULL),
  -- Due Date field
  ('dd777777-7777-7777-7777-777777777777', 'aa000000-0000-0000-0000-000000000000', 'Due Date', 'date', false, NULL, NULL),
  -- Bug Severity field (for bugs only)
  ('dd888888-8888-8888-8888-888888888888', 'aa000000-0000-0000-0000-000000000000', 'Severity', 'select', false,
   ARRAY['Blocker', 'Critical', 'Major', 'Minor', 'Trivial'], 'Major'),
  -- Environment field (for bugs only)
  ('dd999999-9999-9999-9999-999999999999', 'aa000000-0000-0000-0000-000000000000', 'Environment', 'text', false, NULL, NULL);

-- Associate fields with task types
INSERT INTO template_task_type_fields (task_type_id, field_id)
VALUES
  -- User Story fields
  ('cc111111-1111-1111-1111-111111111111', 'dd111111-1111-1111-1111-111111111111'), -- Story Points
  ('cc111111-1111-1111-1111-111111111111', 'dd222222-2222-2222-2222-222222222222'), -- Priority
  ('cc111111-1111-1111-1111-111111111111', 'dd333333-3333-3333-3333-333333333333'), -- Sprint
  ('cc111111-1111-1111-1111-111111111111', 'dd444444-4444-4444-4444-444444444444'), -- Acceptance Criteria
  ('cc111111-1111-1111-1111-111111111111', 'dd555555-5555-5555-5555-555555555555'), -- Definition of Done
  ('cc111111-1111-1111-1111-111111111111', 'dd666666-6666-6666-6666-666666666666'), -- Epic Link
  ('cc111111-1111-1111-1111-111111111111', 'dd777777-7777-7777-7777-777777777777'), -- Due Date
  
  -- Bug fields
  ('cc222222-2222-2222-2222-222222222222', 'dd222222-2222-2222-2222-222222222222'), -- Priority
  ('cc222222-2222-2222-2222-222222222222', 'dd888888-8888-8888-8888-888888888888'), -- Severity
  ('cc222222-2222-2222-2222-222222222222', 'dd999999-9999-9999-9999-999999999999'), -- Environment
  ('cc222222-2222-2222-2222-222222222222', 'dd777777-7777-7777-7777-777777777777'), -- Due Date
  
  -- Epic fields
  ('cc333333-3333-3333-3333-333333333333', 'dd222222-2222-2222-2222-222222222222'), -- Priority
  ('cc333333-3333-3333-3333-333333333333', 'dd777777-7777-7777-7777-777777777777'), -- Due Date
  
  -- Task fields
  ('cc444444-4444-4444-4444-444444444444', 'dd111111-1111-1111-1111-111111111111'), -- Story Points
  ('cc444444-4444-4444-4444-444444444444', 'dd222222-2222-2222-2222-222222222222'), -- Priority
  ('cc444444-4444-4444-4444-444444444444', 'dd333333-3333-3333-3333-333333333333'), -- Sprint
  ('cc444444-4444-4444-4444-444444444444', 'dd777777-7777-7777-7777-777777777777'), -- Due Date
  
  -- Spike fields
  ('cc555555-5555-5555-5555-555555555555', 'dd111111-1111-1111-1111-111111111111'), -- Story Points
  ('cc555555-5555-5555-5555-555555555555', 'dd222222-2222-2222-2222-222222222222'), -- Priority
  ('cc555555-5555-5555-5555-555555555555', 'dd333333-3333-3333-3333-333333333333'), -- Sprint
  ('cc555555-5555-5555-5555-555555555555', 'dd777777-7777-7777-7777-777777777777'); -- Due Date